'use strict';

var page = require('webpage').create();
page.onLoadFinished = function(status){
  var size = page.evaluate(function(){
    var element = document.getElementById('image');
    return {width: element.naturalWidth, height: element.naturalHeight};
  });
  console.log('width ' + size.width)
  console.log('height ' + size.height);
  page.viewportSize = size;
  page.render('horse-test.png');
  page.release();
  slimer.exit();
}
console.log(phantom.args);
//page.open('http:127.0.0.1:8080/sample2.html')
page.setContent("<head>\n  <style>\n    html, body {\n      width: 100%;\n      height: 100%;\n      float: left;\n      padding: 0;\n      margin: 0;\n    }\n\n    body {\n      overflow: hidden;\n    }\n\n    .poster {\n      width: 100%;\n      height: 100%;\n      float: left;\n    }\n    .poster img {\n      width: 100%;\n      min-width: 700px;\n      -o-object-fit: contain;\n         object-fit: contain;\n      position: absolute;\n    }\n\n    .red-blue {\n      background: #ff7900;\n    }\n    .red-blue img {\n      -webkit-filter: grayscale(100%);\n              filter: grayscale(100%);\n      mix-blend-mode: multiply;\n    }\n    .red-blue:after {\n      mix-blend-mode: screen;\n      display: block;\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      -webkit-filter: contrast(1.3);\n              filter: contrast(1.3);\n    }\n    .red-blue:after {\n      background: rgba(119, 0, 200, 0.5);\n    }\n\n    .teal-purple {\n      background: #48ffcb;\n    }\n    .teal-purple img {\n      -webkit-filter: grayscale(100%);\n              filter: grayscale(100%);\n      mix-blend-mode: multiply;\n    }\n    .teal-purple:after {\n      mix-blend-mode: screen;\n      display: block;\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      -webkit-filter: contrast(1.3);\n              filter: contrast(1.3);\n    }\n    .teal-purple:after {\n      background: rgba(138, 0, 235, 0.5);\n    }\n\n    .yellow-blue {\n      background: #ffc600;\n    }\n    .yellow-blue img {\n      -webkit-filter: grayscale(100%);\n              filter: grayscale(100%);\n      mix-blend-mode: multiply;\n    }\n    .yellow-blue:after {\n      mix-blend-mode: screen;\n      display: block;\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      -webkit-filter: contrast(1.3);\n              filter: contrast(1.3);\n    }\n    .yellow-blue:after {\n      background: rgba(39, 55, 255, 0.5);\n    }\n\n    .blue-red {\n      background: #00d8ff;\n    }\n    .blue-red img {\n      -webkit-filter: grayscale(100%);\n              filter: grayscale(100%);\n      mix-blend-mode: multiply;\n    }\n    .blue-red:after {\n      mix-blend-mode: screen;\n      display: block;\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      -webkit-filter: contrast(1.3);\n              filter: contrast(1.3);\n    }\n    .blue-red:after {\n      background: rgba(250, 0, 47, 0.5);\n    }\n\n    .green-blue {\n      background: #36c200;\n    }\n    .green-blue img {\n      -webkit-filter: grayscale(100%);\n              filter: grayscale(100%);\n      mix-blend-mode: multiply;\n    }\n    .green-blue:after {\n      mix-blend-mode: screen;\n      display: block;\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      -webkit-filter: contrast(1.3);\n              filter: contrast(1.3);\n    }\n    .green-blue:after {\n      background: rgba(0, 47, 255, 0.5);\n    }\n\n    .yellow-red {\n      background: #ffde00;\n    }\n    .yellow-red img {\n      -webkit-filter: grayscale(100%);\n              filter: grayscale(100%);\n      mix-blend-mode: multiply;\n    }\n    .yellow-red:after {\n      mix-blend-mode: screen;\n      display: block;\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      -webkit-filter: contrast(1.3);\n              filter: contrast(1.3);\n    }\n    .yellow-red:after {\n      background: rgba(255, 0, 90, 0.5);\n    }\n\n    .pink-blue {\n      background: #ff646a;\n    }\n    .pink-blue img {\n      -webkit-filter: grayscale(100%);\n              filter: grayscale(100%);\n      mix-blend-mode: multiply;\n    }\n    .pink-blue:after {\n      mix-blend-mode: screen;\n      display: block;\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      -webkit-filter: contrast(1.3);\n              filter: contrast(1.3);\n    }\n    .pink-blue:after {\n      background: rgba(0, 13, 223, 0.5);\n    }\n\n    .yellow-green {\n      background: #fed239;\n    }\n    .yellow-green img {\n      -webkit-filter: grayscale(100%);\n              filter: grayscale(100%);\n      mix-blend-mode: multiply;\n    }\n    .yellow-green:after {\n      mix-blend-mode: screen;\n      display: block;\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      -webkit-filter: contrast(1.3);\n              filter: contrast(1.3);\n    }\n    .yellow-green:after {\n      background: rgba(54, 194, 0, 0.5);\n    }\n\n\n    </style>\n  </head>\n<body>\n    <div class=\"poster red-blue\">\n      <img id='image' src=\"https://a248.e.akamai.net/secure.meetupstatic.com/photos/event/5/f/6/6/highres_370044422.jpeg\">\n    </div>\n</body>", 'http://google.com');